<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>图片上传</title>
    <link rel="stylesheet" href="css/tinyImgUpload.css">
</head>
<body >

<div id="upload">

</div>
<div id="show">

</div>
<button class="submit">submit</button>
<script src="js/tinyImgUpload.js"></script>
<script src="js/jquery.1.7.js"></script>
<script>
document.documentElement.style.fontSize = document.documentElement.clientWidth*0.1+'px';
function basePath() {
    //获取当前网址，如： http://localhost:8083/myproj/view/my.jsp
    var curWwwPath = window.document.location.href;
    //获取主机地址之后的目录，如： myproj/view/my.jsp
    var pathName = window.document.location.pathname;
    var pos = curWwwPath.indexOf(pathName);
    //获取主机地址，如： http://localhost:8083
    var localhostPaht = curWwwPath.substring(0,pos);
    //获取带"/"的项目名，如：/myproj
    var projectName = pathName.substring(0,pathName.substr(1).indexOf('/')+1);
    //得到了 http://localhost:8083/myproj
    var realPath = localhostPaht + projectName;
    return realPath + "/";
}
var options = {
    path: basePath() + 'uploadFile?hospitalId=30646',
    onSuccess: function (res) {
        console.log(res.data);
        console.log(res.data.id);
        //var img = ' <img style="width: 100%;height: 100%" src="data:image/jpg;base64,'+ res.data.avatar +'" >' ;
        //$("#show").append(img);

    },
    onFailure: function (res) {
        console.log(res);
    }
}

var upload = tinyImgUpload('#upload', options);
document.getElementsByClassName('submit')[0].onclick = function (e) {
    upload();
}
</script>
</body>
</html>